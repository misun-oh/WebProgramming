<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dev.spring_prj.mapper.BoardMapper">
  <select id="get" >
    select * from board where num=#{num}
  </select>
  
  <select id="getPagedList">
  	select * 
  	from board 
  	<where>
	    <if test="searchField != '' and searchWord != ''">
	      and ${searchField} = #{searchWord}
	    </if>
  	</where>
  	ORDER BY num DESC 
  	OFFSET (#{pageNo}-1)*#{amount} ROWS FETCH NEXT #{amount} ROWS ONLY
  </select>
  
<select id="searchBoard">
    SELECT * FROM board
    <where>
        <if test="searchWord != null and searchWord != ''">
            <foreach item="field" collection="dto.searchField.split('/')"
                     open="(" separator="or" close=")">
                ${field} LIKE CONCAT('%', #{dto.searchWord}, '%')
            </foreach>
        </if>
    </where>
    ORDER BY num DESC
    OFFSET (#{pageNo} - 1) * #{amount} ROWS FETCH NEXT #{amount} ROWS ONLY
</select>
</mapper>